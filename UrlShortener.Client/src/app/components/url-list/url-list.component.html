<div class="min-h-screen bg-gray-50 py-8 px-4">
  <div class="max-w-5xl mx-auto">
    <!-- Header -->
    <div class="mb-6">
      <h1 class="text-3xl font-bold text-gray-800 mb-2">Short URLs</h1>
      <p class="text-gray-600">Manage your shortened links</p>
    </div>

    <!-- Alerts -->
    <div *ngIf="successMessage" class="mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded">
      {{ successMessage }}
      <button (click)="successMessage = ''" class="float-right font-bold">&times;</button>
    </div>

    <div *ngIf="errorMessage" class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
      {{ errorMessage }}
      <button (click)="errorMessage = ''" class="float-right font-bold">&times;</button>
    </div>

    <!-- Create URL Form -->
    <div *ngIf="authService.isAuthenticated" class="mb-6 bg-white border border-gray-300 rounded-lg p-6">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">Add New URL</h2>
      <form (ngSubmit)="createUrl()" #urlForm="ngForm" class="flex gap-3">
        <input 
          type="url" 
          name="newUrl"
          [(ngModel)]="newUrl"
          required
          [disabled]="isLoading"
          placeholder="Enter your long URL..."
          class="flex-1 px-4 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500">
        <button 
          type="submit" 
          [disabled]="! urlForm.valid || isLoading"
          class="px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed">
          {{ isLoading ?  'Creating...' : 'Shorten' }}
        </button>
      </form>
    </div>

    <!-- Not Authenticated -->
    <div *ngIf="!authService. isAuthenticated && !isLoading" class="mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center justify-between">
      <span class="text-gray-700">Login to create short URLs</span>
      <a routerLink="/login" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
        Login
      </a>
    </div>

    <!-- URLs List -->
    <div *ngIf="!isLoading && urls. length > 0" class="space-y-4">
      <div *ngFor="let url of urls" class="bg-white border border-gray-300 rounded-lg p-5 hover:shadow-md transition-shadow">
        <!-- Short Code Badge -->
        <div class="flex items-center justify-between mb-3">
          <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-mono">
            {{ url.shortCode }}
          </span>
        </div>

        <!-- Original URL -->
        <div class="mb-3">
          <div class="text-xs text-gray-500 uppercase mb-1">Original URL</div>
          <a [href]="url.originalUrl" target="_blank" class="text-sm text-gray-700 hover:text-blue-600 break-all">
            {{ url.originalUrl }}
          </a>
        </div>

        <!-- Short URL -->
        <div class="mb-3">
          <div class="text-xs text-gray-500 uppercase mb-1">Short URL</div>
          <div class="flex items-center gap-2 bg-gray-50 border border-gray-200 rounded px-3 py-2">
            <code class="flex-1 text-sm text-blue-600">{{ getFullUrl(url.shortCode) }}</code>
            <button 
              (click)="copyToClipboard(getFullUrl(url.shortCode))"
              class="text-blue-600 hover:text-blue-800 text-xs">
              Copy
            </button>
          </div>
        </div>

        <!-- Meta Info -->
        <div class="flex items-center justify-between text-xs text-gray-500 pt-3 border-t border-gray-200 mb-3">
          <span>Created by:  {{ url.createdByLogin }}</span>
          <span>{{ url.createdAt | date:'short' }}</span>
        </div>

        <!-- Action Buttons -->
        <div class="flex gap-2">
          <button 
            (click)="copyToClipboard(getFullUrl(url.shortCode))"
            class="flex-1 px-4 py-2 border border-gray-300 rounded hover:bg-gray-100 text-sm">
            Copy URL
          </button>
          
          <button 
            *ngIf="authService.isAuthenticated"
            [routerLink]="['/url', url.id]"
            class="flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">
            View Details
          </button>
          
          <button 
            *ngIf="authService.isAuthenticated && (authService.isAdmin || authService.currentUserValue?.login === url.createdByLogin)"
            (click)="deleteUrl(url.id, url.createdByLogin)"
            class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm">
            Delete
          </button>
        </div>
      </div>
    </div>

    <!-- Loading -->
    <div *ngIf="isLoading" class="text-center py-12">
      <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      <p class="text-gray-600 mt-4">Loading... </p>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && urls.length === 0" class="text-center py-12 bg-white border border-gray-300 rounded-lg">
      <p class="text-gray-600 text-lg mb-4">No URLs yet</p>
      <a *ngIf="!authService. isAuthenticated" routerLink="/login" class="inline-block px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
        Login to Create
      </a>
    </div>
  </div>
</div>